<!--
        Customize this policy to fit your own app's needs. For more guidance, see:
            https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
        Some notes:
            * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
            * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
            * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
                * Enable inline JS: add 'unsafe-inline' to default-src
        -->
<!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">-->
<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
<link href="css/index.css" rel="stylesheet">
<link href="css/custom-form.css" rel="stylesheet">
<link href="css/OpenSans.css" rel="stylesheet">
<link href="css/jquery-ui.min.css" rel="stylesheet">
<!--<script src="js/jquery.mobile-1.4.5.min.js"></script>-->
<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/numeral.min.js"></script>
<script src="js/algebra-0.2.6.min.js"></script>
<script src="js/math.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/jquery.ui.touch-punch.min.js"></script>
<script src="cordova.js"></script>
<script src="js/relative-values.js"></script>
<script src="js/index.js"></script>
<script src="js/double-input.js"></script>
<script src="js/custom-form-creator.js"></script>

<meta name="format-detection" content="telephone=no">
<meta name="msapplication-tap-highlight" content="no">
<meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">

<body class="fit-image">
    <img class="sizing-box fit-image" src="./img/IMG_20170627_115931.jpg" style="visibility: visible;">
    <custom-form-creator style="position: absolute; left:0; top:0;"></custom-form-creator>
    <button class="square rounded background-button" style="position: absolute; right: 0; top:0; margin:10px;"></button>
    <button class="square rounded sizing-button" style="position: absolute; right: 50px; top:0; margin:10px;"></button>
    <button class="square rounded form-config-button"
        style="position: absolute; right: 0px; top:50px; margin:10px;"></button>
    <button class="square rounded calculate-button"
        style="position: absolute; right: 0px; top:100px; margin:10px;"></button>
</body>
<div style="position: absolute; bottom:0; width: 100%;">
    <button id="collapse-error-view" type="button" class="collapsible-height">

        Error List</button>
    <div id="error-view" class="collapse-height" style="overflow-y:scroll">
        <ul id="error-list">
            <li>hello</li>
        </ul>
    </div>
    <div class ="footer">Icons made by <a href="https://www.flaticon.com/authors/smashicons" title="Smashicons">Smashicons</a> from <a
            href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
</div>
<script>
    setInterval(() => {
        PossibleResize();
    }, 100);
    function PossibleResize() {
        var w = $('.sizing-box').width();
        var h = $('.sizing-box').height();
        if (w != this.imageW || h != this.imageW) {
            $('custom-form-creator').width($('.sizing-box').width());
            $('custom-form-creator').height($('.sizing-box').height());
        }
        this.imageW = w;
        this.imageH = w;
    }

    $(function () {
        var b = $("#collapse-error-view");
        var w = $("#error-view");
        var l = $("#error-list");

        w.height(l.outerHeight());
        w.height(0);

        b.click(function () {

            var b = $("#collapse-error-view");
            var w = $("#error-view");
            var l = $("#error-list");

            if (w.hasClass('open')) {
                w.removeClass('open');
                w.height(0);
            } else {
                w.addClass('open');
                var h = l.outerHeight();
                w.css("height", h);
            }

        });
    });

    var view = document.getElementById('error-view');
    view.SetErrors = function (errorList) {
        var html = '<ul id="error-list">';
        errorList.forEach((e) => {
            html += '<li>' + e + '</li>';
        })
        html += '</ul>'
        view.innerHTML = html;
    }
</script>

</html>